<div class="page_head">
  <h2>ANALYTICAL OVERVIEW</h2>
 </div>

  <div class="subhead">
     <h4>JOB APPLIED BY COUNTRY</h4>
  </div>

<div class="card jobApp_contry">
  <div class="row">
  <div class="col-md-8">
  <div class="dashboardmapcontainer">
    <div class="map">
        <span>Alternative content for the map</span>
    </div>

  </div>
</div>
<div class="col-md-4 selected_contry_box mb-4" style="display: flex;flex-direction: row;align-items: center;">
  <div class="w-100">
  <div class="subhead mb-2">
<h4>Selected Preferred Countries</h4></div>
<p class="mb-2 selected_contry" *ngFor="let jobCountries of SelectedPreferredCountries; let i=index;"><span style="display: inline-block; margin-right: 10px;"  class="iti__flag iti__{{jobCountries.countryCode}}"></span>{{jobCountries.jobCountry}} <span>({{jobCountries.jobCount}})</span></p></div></div>
  </div>
</div>
<div class="dashboard-page">
  <div class="row">


        <div class="subhead mb-3">
          <h4>QUICK STATS</h4>
       </div>
        <div class="col-lg-3">
        <div class="card widget-flat green">
          <div class="card-body">
             <div class="float-end">
                <i class="mdi mdi-account-multiple widget-icon"></i>
             </div>

            <h5 class="mt-0" title="">Profile Status</h5>
              <div class="pt-3 pb-3 d-flex justify-content-between w-100">
                <h3 class="mb-3 mt-3">{{ProfileStrength}}</h3>
                <img src="../../../assets/images/dashboard/profile_status.svg">
              </div>
             <a [routerLink]=" ['../review'] ">Complete your Profile</a>

          </div>
        </div>
        </div>
        <div class="col-lg-3">
          <div class="card widget-flat red" >
             <div class="card-body">
                <div class="float-end">
                   <i class="mdi mdi-account-multiple widget-icon"></i>
                </div>

            <h5 class="mt-0" title="">Monthly Plan</h5>

            <div class="pt-3 pb-3 d-flex justify-content-between w-100">
              <h3 class="mb-3 mt-3"> {{PackagePrice}} </h3>
              <img src="../../../assets/images/dashboard/dollor.svg">
            </div>
            <a  id="RenewSubscribtion" *ngIf="notEligibleForPlanChange == false && paymentMethod=='Offline'&& MonthlyPlanRemainingDays>=7"  >Renew Your Subscription</a>
            <a  id="RenewSubscribtion" (click)="gotoSelectPlanPage()" *ngIf="notEligibleForPlanChange == false && paymentMethod=='Offline'&& MonthlyPlanRemainingDays<=7"  >Renew Your Subscription</a>
            <a id="RenewdisallowSubscribtion" (click)="gotoSelectPlanPage()" *ngIf="notEligibleForPlanChange == false && paymentMethod=='Online' && MonthlyPlanRemainingDays<=7">Renew Your Subscription</a>
            <a id="RenewdisallowSubscribtion"  *ngIf="notEligibleForPlanChange == false && paymentMethod=='Online' && MonthlyPlanRemainingDays>=7">Renew Your Subscription</a>

            <a id="RenewdisallowSubscribtion" (click)="gotoSelectPlanPage()" *ngIf="notEligibleForPlanChange == false && paymentMethod=='Online' && subscriptionStatus == 'Past-Active'">Renew Your Subscription</a>
            <a  id="RenewSubscribtion" (click)="gotoSelectPlanPage()" *ngIf="notEligibleForPlanChange == false && paymentMethod=='Offline'&& subscriptionStatus =='Past-Active'"  >Renew Your Subscription</a>
            <a *ngIf="notEligibleForPlanChange == true">Your Renew plan already in process</a>
          </div>
        </div>
        </div>
        <div class="col-lg-3">
          <div class="card widget-flat blue">
             <div class="card-body">
                <div class="float-end">
                   <i class="mdi mdi-account-multiple widget-icon"></i>
                </div>

                <h5 class="mt-0" title="">Job Applied</h5>

            <div class="pt-3 pb-3 d-flex justify-content-between w-100">
              <h3 class="mb-3 mt-3">{{CurrentMonthJobApplied}}  </h3>
              <img src="../../../assets/images/dashboard/job_applied.svg">
            </div>
            <a [routerLink]=" ['../JobHistory']"> Current Month </a>

          </div>
        </div>
        </div>
        <div class="col-lg-3">
          <div class="card widget-flat yellow"  *ngIf="SubscrptionPlan=='Standard'">
             <div class="card-body">
                <div class="float-end">
                   <i class="mdi mdi-account-multiple widget-icon"></i>
                </div>

            <h5 class="mt-0" title="">Total Job Applied</h5>
            <div class="pt-3 pb-3 d-flex justify-content-between w-100">
              <h3 class="mb-3 mt-3">{{TotalJobApplied}}</h3>
              <img src="../../../assets/images/dashboard/total_job_applied.svg">
            </div>
            <a [routerLink]=" ['../JobHistory']">View Job History</a>

          </div>
        </div>

        <div class="card widget-flat yellow" *ngIf="SubscrptionPlan=='Basic'">
           <div class="card-body">
             <div class="float-end">
               <i class="mdi mdi-account-multiple widget-icon"></i>
               </div>

             <h5 class="mt-0" title="">Subscription Plan</h5>
             <div class="pt-3 pb-3 d-flex justify-content-between w-100">
               <h3 class="mb-3 mt-3">{{SubscrptionPlan}}</h3>
               <img src="../../../assets/images/dashboard/total_job_applied.svg">
               </div>
             <a (click)="UpgradePlan()" *ngIf="notEligibleForPlanChange== false">Upgrade Your Plan</a>
             <a  *ngIf="notEligibleForPlanChange == true">Your upgrade plan already in process</a>
             </div>
           </div>

        </div>
      </div>
        <div class="row mt-3 pt-3">

          <div class="col-md-7  flex-container">
            <div class="subhead mb-3">
              <h4>JOB APPLIED STATUS</h4>
           </div>

           <div class="card widget-flat">
            <div class="card-body">
              <h5 class="card-title">Analytics</h5>
              <hr>
             <div class="row job_applied_row">

                <div class="col-md-4">

                  <div class="analytics-progress daily-progress"></div>
                  <h5 class="text-center mt-3">Daily</h5>
                </div>
                 <div class="col-md-4">
                  <div class="analytics-progress weekly-progress"></div>
                  <h5 class="text-center mt-3">Weekly</h5>
                  </div>
                  <div class="col-md-4">
                  <div class="analytics-progress Yearly-progress"></div>
                  <h5 class="text-center mt-3">Monthly</h5>
                  <!-- <ngx-charts-pie-grid
                  [results]="single" [legendPosition]="middle" [view]="view" [scheme]="colorScheme">
                </ngx-charts-pie-grid > -->


                  <!-- <ngx-charts-advanced-pie-chart
                  [results]="single" [legendPosition]="below" [view]="view" [scheme]="colorScheme">
                </ngx-charts-advanced-pie-chart> -->

              </div>

              </div>



              <!-- <ngx-charts-advanced-pie-chart [view]="view" [scheme]="colorScheme" [results]="single" [gradient]="gradient"
                [legend]="hideLegend" [legendPosition]="legendPosition" [labels]="hideLabels"
                (select)="onSelect($event)" (activate)="onActivate($event)" (deactivate)="onDeactivate($event)">
              </ngx-charts-advanced-pie-chart> -->
         </div>
       </div>


                <!-- /.card-body -->
             </div>
             <div class="col-md-5 flex-container">
              <div class="subhead mb-3">
                 <h4>SUBSCRIPTION CALENDAR</h4>
              </div>

              <div class="card widget-flat">
                <div class="card-body">
                  <h5 class="card-title" style="color:red" *ngIf="MonthlyPlanRemainingDays<0">Subscription Expired</h5>
                  <h5 class="card-title" *ngIf="MonthlyPlanRemainingDays>=0">{{MonthlyPlanRemainingDays}} Days Remaining</h5>
                  <p class="blue-color" *ngIf="MonthlyPlanRemainingDays<0"><b>Subscription Expired On {{SubscrptionExpireDate | date:"d MMM y"}}</b></p>
                  <p class="blue-color" *ngIf="MonthlyPlanRemainingDays>=0"><b>Subscription Expires On {{SubscrptionExpireDate | date:"d MMM y"}}</b></p>
                  <hr>
                  <div id="CalendarContainer" class="calendar-container"></div>
                </div>
           </div>



              <!-- <iframe src="https://calendar.google.com/calendar/embed?height=600&amp;wkst=1&amp;bgcolor=%23ffffff&amp;ctz=Asia%2FKolkata&amp;src=c2h1YmhhbW1vaGl0ZTkwODFAZ21haWwuY29t&amp;src=YWRkcmVzc2Jvb2sjY29udGFjdHNAZ3JvdXAudi5jYWxlbmRhci5nb29nbGUuY29t&amp;src=ZW4uaW5kaWFuI2hvbGlkYXlAZ3JvdXAudi5jYWxlbmRhci5nb29nbGUuY29t&amp;color=%23039BE5&amp;color=%2333B679&amp;color=%230B8043&amp;title=Subscription Calender" style="border:solid 1px #FFF" width="550" height="500" frameborder="0" scrolling="no"></iframe> -->
           </div>

          </div>
        <!--Calender Section-->



</div>



<br>


<!--Job Applied History-->

<div class="subhead mb-3">
  <h4>Job History</h4>
</div>

  <!-- <button (click)="exportToExcel()" class="btn btn-success float-right mb-3 ml-2">Export To Excel</button>
  <input type="text" class="form-control" style="padding:8px;width:20%;" placeholder="Type to filter..." (keyup)="searchFilter($event)" />
  -->
<ngx-datatable class="table table-striped table-hover"
               [rows]="JobHistoryDetails"
               [columnMode]="'force'"
               [headerHeight]="50"
               [footerHeight]="50"
               [rowHeight]="'auto'"
               [limit]="5" >
  <ngx-datatable-column name="Job Applied Date" prop="jobAppliedDate" [width]="100">
    <ng-template let-value="value" ngx-datatable-cell-template>
      <!-- {{ value }} -->
      {{ value | date: 'dd-MMM-yyyy' }}
    </ng-template>
  </ngx-datatable-column>
  <ngx-datatable-column name="Company Name" prop="companyName">
    <ng-template let-value="value" ngx-datatable-cell-template>
      {{value}}
    </ng-template>
  </ngx-datatable-column>
  <ngx-datatable-column name="Job Title" prop="jobTitle" >
     <ng-template let-value="value" ngx-datatable-cell-template>
       {{value}}
     </ng-template>
   </ngx-datatable-column>
  <ngx-datatable-column name="Location" prop="countryCode">
    <ng-template let-value="value" ngx-datatable-cell-template>
      {{value}}
    </ng-template>
  </ngx-datatable-column>

  <ngx-datatable-column name="Job Description" *ngIf="SubscrptionPlan=='Standard'">
    <ng-template let-row="row" ngx-datatable-cell-template>
      <!-- <a class="view_btn" href="{{value}}">View</a> -->
      <a (click)="getJobDescription(row)" data-bs-toggle="modal" data-bs-target="#ViewData" class="view_btn">View</a>
    </ng-template>
  </ngx-datatable-column>

</ngx-datatable>

<div class="modal fade" id="ViewData" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog  modal-dialog-centered modal-lg ">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">JOB DESCRIPTION</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"><i class="fas fa-times"></i></button>
      </div>
      <div class="modal-body">
       <h4>Job Description Data :-</h4>
      <p>Description :-- {{JobDescriptionData}}</p>
     <p>URL:-- <a href="{{JobDescriptionurl}}" target="_blank">{{JobDescriptionurl}}</a></p>
      </div>

    </div>
  </div>
 </div>









<div class="OfflinePaymentReceipt " *ngIf="paymentMethod=='Offline' && paymentStatus=='Pending' && subscriptionStatus=='In-Active' " aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="OfflinePaymentContent">
    <div class="col-md-12 mt-4 mb-4 ">
      <div class="subhead mb-4">
         <h4>OFFLINE PAYMENT RECEIPT</h4>
      </div>

      <div class="row">
        <div class="col-12 col-m-12 col-sm-12">
         <form id="file-upload-form-Offline-Payment">
            <input id="file-upload" type="file" (change)="selectFile($event)" multiple="multiple">
            <label for="file-upload" id="file-drag">
              <div class=" w-100">
               <span class="d-flex align-items-center justify-content-center mb-3">
                  <img src="./assets/images/dashboard/upload.svg" class="pe-2 ps-2"></span>

                  <span id="file-upload-btn" class="submit ripple-theme small">Drag File to attach, or <span class="text-success">browse</span></span>
                  <p class="certificates_upload">PDF, JPG, PNG, GIF (Max 15 mb)</p>
               </div>
            </label>
            <progress id="file-progress" value="0">
             <span>0</span>%
          </progress>
          <output for="file-upload" id="messages"></output>
       </form>
      </div>

      <div class="col-4 col-m-12 col-sm-12">
      <table class="table detail_table wth_round">
         <thead>
            <tr>
               <th>File name</th>
               <th>Uploaded date</th>
               <th>Status</th>
            </tr>
         </thead>
         <tbody>
          <tr *ngFor="let OfflinePaymentReceipt of offlinePaymentReceiptData; let i=index">
          <td  ><a [href]="OfflinePaymentReceipt?.downloadLink">{{ getFileName(OfflinePaymentReceipt?.recepitPath) }}</a></td>
          <td>{{ OfflinePaymentReceipt?.addedOn | date:"d-MMM-y" }}</td>
          <td >{{ OfflinePaymentReceipt?.status}}</td>
       </tr>


         </tbody>
      </table>
      <h6 class="mt-4">Please upload your payment receipt here. It will take 3 to 5 working days to Validate your payment.</h6>
    </div>
  </div>


</div>
</div>

</div>



 <!-- <div class="OfflinePaymentReceipt " *ngIf="paymentMethod=='Online' && paymentStatus=='Pending' && subscriptionStatus=='In-Active' " aria-labelledby="staticBackdropLabel" aria-hidden="true">

  <div class="OfflinePaymentContent">
    <div class="col-md-12 mt-4 mb-4 ">
      <div class="subhead">
         <h4>ONLINE PAYMENT</h4>
      </div>
   <div class="round_brdr_box border-0 bg-white">
      <div class="row">
        <div class="col-md-12  ">
          <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book</p>
          <button type="button"  (click)="onStart()"  class="btn btn-primary continue">Make Payment</button>
      </div>


  </div>

   </div>
</div>
</div>

</div> -->
<script src="//code.tidio.co/ewigmje1zrvwsuvlgmliewvxk97l9xdb.js" async></script>
<script>
    window.tidioChatApi.hide();
</script>


